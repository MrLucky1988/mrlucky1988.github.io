var Brush,BrushTip,animHeart,Tips={};function initHeart(){"use strict";function t(t){return"object"!=typeof t?{}:t}function e(t,e){return"number"!=typeof t?e:t}(Brush=function(n){n=t(n),this.path=n.path||null,this.ctx=n.ctx||null,this.spacing=e(n.spacing,0),this.tip=n.tip||new Tips.Rough1,null!=this.path&&(this.pathLength=this.path.getTotalLength())}).prototype={path:null,pathLength:0,v:0,lastV:0,ctx:null,spacing:0,tip:null,getPos:function(t){return t=this._cleanV(t),this.path.getPointAtLength(t*this.pathLength)},draw:function(){var t=this._getV();this._render(t),this.lastV=t},drawFromLast:function(){var t=this._getV(),e=this.lastV,n=this.spacing;if(n>0){var r=Math.abs(t-e),i=this._lenToV(n);i=r/Math.ceil(r/i);for(var s=e,a=1e3;a>0&&(t>e&&s<=t||t<e&&s>=t);)a--,this._render(s,{rotation:0,pressure:Math.sqrt(1-2*Math.abs(t-.5))}),s+=i}this.lastV=t},_vToLen:function(t){return t*this.pathLength},_lenToV:function(t){return t/this.pathLength},_getV:function(){return this._cleanV(this.v)},_cleanV:function(t){return(t=e(t,this.v))>1&&(t=1),t<0&&(t=0),t},_render:function(n,r){n=this._cleanV(n);var i=e((r=t(r)).pressure,1),s=this.ctx,a=this.getPos(n);s.save(),s.translate(a.x,a.y),this.tip.draw(s,{pressure:i}),s.restore()}},(BrushTip=function(n){n=t(n),this.size=e(n.size,1)}).prototype={size:1,_currentCtx:null,_currentOptions:{},draw:function(e,n){n=t(n),this._currentCtx=e,this._render(n)},_render:function(t){},_drawCircle:function(t,n,r,i){if(n=e(n,0),r=e(r,0),i){var s=n,a=r;n=Math.cos(s)*a,r=Math.sin(s)*a}var o=this._currentCtx;o.beginPath(),o.arc(n,r,t,0,2*Math.PI),o.fill(),o.closePath()}},Tips.Round=function(t){BrushTip.call(this,t)},Tips.Round.prototype=Object.create(BrushTip.prototype),Tips.Round.prototype.constructor=Tips.Round,Tips.Round.prototype._render=function(t){BrushTip.prototype._render.call(this,t);var e=this._currentCtx;e.fillStyle="rgba(155, 0, 0, 0.5)",e.scale(.5,.5),this._drawCircle(4*this.size)},Tips.Rough1=function(t){BrushTip.call(this,t);this._points=new Array;for(var e=0;e<10;e++){var n=Math.pow(Math.random(),2),r=Math.random()*Math.PI*2,i=.1+4*Math.pow(1-n,2);n*=3,this._points.push({d:n,a:r,r:i})}},Tips.Rough1.prototype=Object.create(BrushTip.prototype),Tips.Rough1.prototype.constructor=Tips.Rough1,Tips.Rough1.prototype._points=null,Tips.Rough1.prototype._render=function(t){BrushTip.prototype._render.call(this,t);e(t.pressure,1),this.size;this._currentCtx.fillStyle="rgba(180, 0, 0, 0.5)";var n=this;this._points.forEach(function(t,e){n._drawCircle(1,t.a,t.d,!0)})}}function setupHeart(){"use strict";initHeart();for(var t=document.querySelector("#canvas-heart").getContext("2d"),e=document.querySelector("#svg-heart").querySelectorAll("#svg-heart path"),n=[],r=[],i=0;i<e.length;i++){var s=e[i],a=new Brush({path:s,ctx:t,spacing:2});n.push(a);var o=new Brush({path:s,ctx:t,spacing:1,tip:new Tips.Round});r.push(o)}let h=8;function u(t,e){var n=function(){t.drawFromLast()};TweenMax.to(t,h,{v:1,delay:h*e,ease:Quint.linear,onUpdate:n,onComplete:n})}animHeart=function(){var e;console.log("START ANIM HEART"),e=function(t){TweenMax.killTweensOf(t),t.v=0,t.draw()},n.forEach(e),r.forEach(e),t.clearRect(0,0,800,800),r.forEach(u),setTimeout(()=>document.getElementById("canvas-heart").style.animation="fadeOut 10s linear 12s forwards",1e3*h*r.length+100)},document.getElementById("canvas-heart").onanimationend=pageHeartFinished}