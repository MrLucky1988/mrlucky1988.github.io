var Brush,BrushTip,animRoughLovely,fadeOut,animOvalLovely,Tips={};function initLovely(){"use strict";function t(t){return"object"!=typeof t?{}:t}function e(t,e){return"number"!=typeof t?e:t}(Brush=function(n){n=t(n),this.path=n.path||null,this.ctx=n.ctx||null,this.spacing=e(n.spacing,0),this.tip=n.tip||new Tips.Rough1,null!=this.path&&(this.pathLength=this.path.getTotalLength())}).prototype={path:null,pathLength:0,v:0,lastV:0,ctx:null,spacing:0,tip:null,getPos:function(t){return t=this._cleanV(t),this.path.getPointAtLength(t*this.pathLength)},draw:function(){var t=this._getV();this._render(t),this.lastV=t},drawFromLast:function(){var t=this._getV(),e=this.lastV,n=this.spacing;if(n>0){var r=Math.abs(t-e),i=this._lenToV(n);i=r/Math.ceil(r/i);for(var o=e,s=1e3;s>0&&(t>e&&o<=t||t<e&&o>=t);)s--,this._render(o,{rotation:0,pressure:Math.sqrt(1-2*Math.abs(t-.5))}),o+=i}this.lastV=t},_vToLen:function(t){return t*this.pathLength},_lenToV:function(t){return t/this.pathLength},_getV:function(){return this._cleanV(this.v)},_cleanV:function(t){return(t=e(t,this.v))>1&&(t=1),t<0&&(t=0),t},_render:function(n,r){n=this._cleanV(n);var i=e((r=t(r)).pressure,1),o=this.ctx,s=this.getPos(n);o.save(),o.translate(s.x,s.y),this.tip.draw(o,{pressure:i}),o.restore()}},(BrushTip=function(n){n=t(n),this.size=e(n.size,1)}).prototype={size:1,_currentCtx:null,_currentOptions:{},draw:function(e,n){n=t(n),this._currentCtx=e,this._render(n)},_render:function(t){},_drawCircle:function(t,n,r,i){if(n=e(n,0),r=e(r,0),i){var o=n,s=r;n=Math.cos(o)*s,r=Math.sin(o)*s}var a=this._currentCtx;a.beginPath(),a.arc(n,r,1,0,2,!0),a.fill(),a.closePath()}},Tips.Round=function(t){BrushTip.call(this,t)},Tips.Round.prototype=Object.create(BrushTip.prototype),Tips.Round.prototype.constructor=Tips.Round,Tips.Round.prototype._render=function(t){BrushTip.prototype._render.call(this,t);var e=this._currentCtx;e.fillStyle="rgba(155, 0, 0, 0.8)",e.scale(.5,.5),this._drawCircle(4*this.size)},Tips.Rough1=function(t){let e,n;BrushTip.call(this,t),e=16,n=5,this._points=new Array;for(var r=0;r<16;r++){var i=Math.pow(Math.random(),2),o=Math.random()*Math.PI*2,s=.1+4*Math.pow(1-i,2);i*=5,this._points.push({d:i,a:o,r:s})}},Tips.Rough1.prototype=Object.create(BrushTip.prototype),Tips.Rough1.prototype.constructor=Tips.Rough1,Tips.Rough1.prototype._points=null,Tips.Rough1.prototype._render=function(t){BrushTip.prototype._render.call(this,t),this._currentCtx.fillStyle="rgba(180, 0, 0, 0.8)";var e=this;this._points.forEach(function(t,n){e._drawCircle(.1*t.r,t.a,t.d,!0)})}}var isLovelyRough=!1;function setupLovely(){"use strict";initLovely();for(var t=document.querySelector("#canvas-lovely").getContext("2d"),e=document.querySelector("#svg-lovely").querySelectorAll("#svg-lovely path"),n=[],r=0;r<e.length;r++){var i=new Brush({path:e[r],ctx:t,spacing:1});n.push(i)}let o=.8;function s(t,e){var n=()=>t.drawFromLast();TweenMax.to(t,1.4,{v:1,delay:o*e,ease:Quint.easeOut,onUpdate:n,onComplete:n})}animRoughLovely=function(){console.log("START ANIM LOVELY"),n.forEach(function(t){TweenMax.killTweensOf(t),t.v=0,t.draw()}),t.clearRect(0,0,800,800),isLovelyRough=!0,n.forEach(s),setTimeout(()=>document.getElementById("canvas-lovely").style.animation="fadeOut 10s linear 12s forwards",1e3*o*n.length+100)},document.getElementById("canvas-lovely").onanimationend=pageLovelyFinished}